import CrawlState, { Exploit } from '../state.ts'
import { setupState, jack } from '../../utilities/testing/crew.ts'
import getExploits from './get.ts'
import setExploits from './set.ts'

describe('setExploits',  () => {
  let state: CrawlState
  const exploit: Exploit = {
    history: 'Calico Jack slipped past a Spanish warship.',
    legend: ['Calico Jack captured a Spanish warship.']
  }

  beforeEach(() => {
    state = setupState()
  })

  it('sets a captainâ€™s exploits', async () => {
    const updated = await setExploits(jack, [exploit], state, false)
    expect(await getExploits(jack, updated)).toEqual([exploit])
  })
})
